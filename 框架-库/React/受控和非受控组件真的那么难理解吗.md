## å—æ§å’Œéå—æ§ç»„ä»¶çœŸçš„é‚£ä¹ˆéš¾ç†è§£å—ï¼Ÿ(Reactå®é™…æ¡ˆä¾‹è¯¦è§£)

## å‰è¨€

ä½ ç›¼ä¸–ç•Œï¼Œæˆ‘ç›¼æœ›ä½ æ— `bug`ã€‚Hello å¤§å®¶å¥½ï¼æˆ‘æ˜¯éœ–å‘†å‘†ã€‚

æœ€è¿‘éƒ½æ²¡æ€ä¹ˆè¾“å‡ºäº†ğŸ˜‚ï¼Œä¸æ˜¯åœæ›´é€šçŸ¥å°±æ˜¯`"è½¯æ–‡"`ï¼Œè¿˜æ˜¯æœ‰ç‚¹ä¸å¥½æ„æ€çš„ã€‚é—®é¢˜ä¸å¤§ï¼Œæˆ‘é“(çš®)è°¦(åš)å’¯ğŸ˜„ã€‚

ä»Šå¤©å’±å†æ¥èŠç‚¹æŠ€æœ¯ç›¸å…³çš„ä¸œè¥¿å§ï¼Œä¹Ÿå°±æ˜¯æœ¬ç¯‡çš„æ ‡é¢˜â€”â€”å—æ§å’Œéå—æ§ç»„ä»¶ã€‚

å†™è¿™ç¯‡æ–‡ç« çš„åŸå› æ˜¯å‘†å‘†åœ¨å†™`HOC`æ—¶æœ‰æ¶‰åŠåˆ°å—æ§å’Œéå—æ§ç»„ä»¶çš„å†…å®¹ï¼Œç„¶åå‘ç°èƒ½è¯´çš„å†…å®¹è¿˜æ˜¯æŒºå¤šçš„ï¼Œä½†æ˜¯æœç´¢äº†ä¸€ä¸‹ç½‘ç»œä¸Šçš„æ•™æå¤§å¤šè¯´çš„éƒ½æ¯”è¾ƒæ··ä¹±ï¼Œå¯¹æ–°æ‰‹æ¥è¯´ä¸å¤ªå¥½ç†è§£ã€‚

æ‰€ä»¥å‘†å‘†ä¹Ÿæ˜¯å¸Œæœ›èƒ½å‘æŒ¥è‡ªèº«æ‰€é•¿å°†è¿™éƒ¨åˆ†å†…å®¹è¯´çš„çŸ­è€Œç²¾ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ã€‚

(æ²¡é”™ï¼Œè¿™é‡Œçš„é•¿å°±æ˜¯ä½ ä»¬æƒ³çš„é•¿ï¼Œè€ŒçŸ­ä¸æ˜¯ä½ ä»¬æƒ³çš„çŸ­...)

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d542f3084fd4bd0ad92cde67d803ee7~tplv-k3u1fbpfcp-zoom-1.image)

å¥½çš„ğŸ‘Œï¼Œä¸çš®äº†ğŸ˜ï¼Œæ¥çœ‹çœ‹é€šè¿‡é˜…è¯»æœ¬ç¯‡æ–‡ç« ä½ å¯ä»¥å­¦ä¹ åˆ°ï¼š

- å—æ§ç»„ä»¶åŸºæœ¬æ¦‚å¿µ
- selectå—æ§ç»„ä»¶
- åŠ¨æ€è¡¨å•å—æ§ç»„ä»¶æ¡ˆä¾‹
- éå—æ§ç»„ä»¶
- ç‰¹æ®Šçš„æ–‡ä»¶fileæ ‡ç­¾



## æ­£æ–‡

### å—æ§ç»„ä»¶åŸºæœ¬æ¦‚å¿µ

é€šè¿‡åç§°ï¼Œæˆ‘ä»¬å¯ä»¥çŒœæµ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªè¯æ˜¯ä»€ä¹ˆæ„æ€ï¼š

- å—æ§ç»„ä»¶ï¼šå—æˆ‘ä»¬æ§åˆ¶çš„ç»„ä»¶
- éæ§ç»„ä»¶ï¼šä¸å—æˆ‘ä»¬æ§åˆ¶çš„ç»„ä»¶

(è¿™æè«çš„ä¸æ˜¯åºŸè¯å—...)

å’³å’³ï¼Œå¥½å§ï¼Œè¿™é‡Œçš„å—æ§å’Œéæ§æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®ä¹Ÿå°±æ˜¯æˆ‘ä»¬**å¯¹æŸä¸ªç»„ä»¶çŠ¶æ€çš„æŒæ§ï¼Œå®ƒçš„å€¼æ˜¯å¦åªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸èƒ½é€šè¿‡ä»£ç æ§åˆ¶**ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨`React`ä¸­å®šä¹‰äº†ä¸€ä¸ª`input`è¾“å…¥æ¡†çš„è¯ï¼Œå®ƒå¹¶æ²¡æœ‰ç±»ä¼¼äº`Vue`é‡Œ`v-model`çš„è¿™ç§åŒå‘ç»‘å®šåŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä¸€ä¸ªæŒ‡ä»¤èƒ½å¤Ÿå°†æ•°æ®å’Œè¾“å…¥æ¡†ç»“åˆèµ·æ¥ï¼Œç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹ï¼Œç„¶åæ•°æ®åŒæ­¥æ›´æ–°ã€‚

å°±åƒä¸‹é¢è¿™ä¸ªæ¡ˆä¾‹ï¼š

```jsx
class TestComponent extends React.Component {
  render () {
    return <input name="username" />
  }
}
```

ç”¨æˆ·åœ¨ç•Œé¢ä¸Šçš„è¾“å…¥æ¡†è¾“å…¥å†…å®¹æ—¶ï¼Œå®ƒæ˜¯è‡ªå·±ç»´æŠ¤äº†ä¸€ä¸ª`"state"`ï¼Œè¿™æ ·çš„è¯å°±èƒ½æ ¹æ®ç”¨æˆ·çš„è¾“å…¥è‡ªå·±è¿›è¡Œ`UI`ä¸Šçš„æ›´æ–°ã€‚(è¿™ä¸ª`state`å¹¶ä¸æ˜¯æˆ‘ä»¬å¹³å¸¸çœ‹è§çš„`this.state`ï¼Œè€Œæ˜¯æ¯ä¸ªè¡¨å•å…ƒç´ ä¸ŠæŠ½è±¡çš„`state`)

æƒ³æƒ³æ­¤æ—¶å¦‚æœæˆ‘ä»¬æƒ³è¦æ§åˆ¶è¾“å…¥æ¡†çš„å†…å®¹å¯ä»¥æ€æ ·åšå‘¢ï¼Ÿå””...è¾“å…¥æ¡†çš„å†…å®¹å–å†³çš„æ˜¯`input`ä¸­çš„`value`å±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨`this.state`ä¸­å®šä¹‰ä¸€ä¸ªåä¸º`username`çš„å±æ€§ï¼Œå¹¶å°†`input`ä¸Šçš„`value`æŒ‡å®šä¸ºè¿™ä¸ªå±æ€§ï¼š

```jsx
class TestComponent extends React.Component {
  constructor (props) {
    super(props);
    this.state = { username: 'lindaidai' };
  }
  render () {
    return <input name="username" value={this.state.username} />
  }
}
```

ä½†æ˜¯è¿™æ—¶å€™ä½ ä¼šå‘ç°`input`çš„å†…å®¹æ˜¯åªè¯»çš„ï¼Œå› ä¸º`value`ä¼šè¢«æˆ‘ä»¬çš„`this.state.username`æ‰€æ§åˆ¶ï¼Œå½“ç”¨æˆ·è¾“å…¥æ–°çš„å†…å®¹æ—¶ï¼Œ`this.state.username`å¹¶ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè¿™æ ·çš„è¯`input`å†…çš„å†…å®¹ä¹Ÿå°±ä¸ä¼šå˜äº†ã€‚

å“ˆå“ˆï¼Œä½ å¯èƒ½å·²ç»æƒ³åˆ°äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª`onChange`äº‹ä»¶æ¥ç›‘å¬è¾“å…¥å†…å®¹çš„æ”¹å˜å¹¶ä½¿ç”¨`setState`æ›´æ–°`this.state.username`ï¼š

```jsx
class TestComponent extends React.Component {
  constructor (props) {
    super(props);
    this.state = {
      username: "lindaidai"
    }
  }
  onChange (e) {
    console.log(e.target.value);
    this.setState({
      username: e.target.value
    })
  }
  render () {
    return <input name="username" value={this.state.username} onChange={(e) => this.onChange(e)} />
  }
}
```

ç°åœ¨ä¸è®ºç”¨æˆ·è¾“å…¥ä»€ä¹ˆå†…å®¹`state`ä¸`UI`éƒ½ä¼šè·Ÿç€æ›´æ–°äº†ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ä¸­çš„å…¶å®ƒåœ°æ–¹ä½¿ç”¨`this.state.username`æ¥è·å–åˆ°`input`é‡Œçš„å†…å®¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`this.setState()`æ¥ä¿®æ”¹`input`é‡Œçš„å†…å®¹ã€‚

OKğŸ‘Œï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹**å—æ§ç»„ä»¶**çš„å®šä¹‰ï¼š

åœ¨HTMLçš„è¡¨å•å…ƒç´ ä¸­ï¼Œå®ƒä»¬é€šå¸¸è‡ªå·±ç»´æŠ¤ä¸€å¥—`state`ï¼Œå¹¶éšç€ç”¨æˆ·çš„è¾“å…¥è‡ªå·±è¿›è¡Œ`UI`ä¸Šçš„æ›´æ–°ï¼Œè¿™ç§è¡Œä¸ºæ˜¯ä¸è¢«æˆ‘ä»¬ç¨‹åºæ‰€ç®¡æ§çš„ã€‚è€Œå¦‚æœå°†`React`é‡Œçš„`state`å±æ€§å’Œè¡¨å•å…ƒç´ çš„å€¼å»ºç«‹ä¾èµ–å…³ç³»ï¼Œå†é€šè¿‡`onChange`äº‹ä»¶ä¸`setState()`ç»“åˆæ›´æ–°`state`å±æ€§ï¼Œå°±èƒ½è¾¾åˆ°æ§åˆ¶ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢«`React`ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åš**å—æ§ç»„ä»¶**ã€‚

(é¢ï¼Œå‘†å‘†è®¤ä¸ºä¸Šé¢ğŸ‘†è¿™ä¸ªæ€»ç»“å°±å¯ä»¥ç”¨åœ¨é¢è¯•å½“ä¸­äº†)



### selectå—æ§ç»„ä»¶

åœ¨ä¸Šé¢å‘†å‘†ç”¨`input`å‘å¤§å®¶æ¼”ç¤ºäº†ä¸€ä¸ªæœ€åŸºæœ¬çš„å—æ§ç»„ä»¶ï¼Œé‚£ä¹ˆå…¶å®å¯¹äºå…¶å®ƒçš„è¡¨å•å…ƒç´ ä½¿ç”¨èµ·æ¥ä¹Ÿå·®ä¸å¤šï¼Œå¯èƒ½å°±æ˜¯å±æ€§åå’Œäº‹ä»¶ä¸åŒè€Œå·²ã€‚

ä¾‹å¦‚`input`ç±»å‹ä¸º`text`çš„è¡¨å•å…ƒç´ ä¸­ä½¿ç”¨çš„æ˜¯ï¼š

- `value`
- `onChange`

å¯¹äº`textarea`æ ‡ç­¾ä¹Ÿå’Œå®ƒä¸€æ ·æ˜¯ä½¿ç”¨`value`å’Œ`onChange`ï¼š

```html
<textarea value={this.state.value} onChange={this.handleChange} />
```

#### å•é€‰select

å¯¹äº`select`è¡¨å•å…ƒç´ æ¥è¯´ï¼Œ`React`ä¸­å°†å…¶è½¬åŒ–ä¸ºå—æ§ç»„ä»¶å¯èƒ½å’ŒåŸç”Ÿ`HTML`ä¸­æœ‰ä¸€äº›åŒºåˆ«ã€‚

åœ¨åŸç”Ÿä¸­ï¼Œæˆ‘ä»¬é»˜è®¤ä¸€ä¸ª`select`é€‰é¡¹é€‰ä¸­ä½¿ç”¨çš„æ˜¯`selected`ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š

```html
<select>
  <option value="sunshine">é˜³å…‰</option>
  <option value="handsome">å¸…æ°”</option>
  <option selected value="cute">å¯çˆ±</option>
  <option value="reserved">é«˜å†·</option>
</select>
```

ç»™`"å¯çˆ±"`çš„é€‰é¡¹è®¾ç½®äº†`selected`ï¼Œé»˜è®¤é€‰ä¸­çš„å°±æ˜¯å®ƒäº†ã€‚

ä½†æ˜¯å¦‚æœæ˜¯ä½¿ç”¨`React`å—æ§ç»„ä»¶æ¥å†™çš„è¯å°±ä¸ç”¨é‚£ä¹ˆéº»çƒ¦äº†ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨æ ¹`select`æ ‡ç­¾ä¸Šä½¿ç”¨`value`å±æ€§ï¼Œå»æ§åˆ¶é€‰ä¸­äº†å“ªä¸ªã€‚è¿™æ ·çš„è¯ï¼Œå¯¹äºæˆ‘ä»¬ä¹Ÿæ›´åŠ ä¾¿æ·ï¼Œåœ¨ç”¨æˆ·æ¯æ¬¡é‡é€‰ä¹‹åæˆ‘ä»¬åªéœ€è¦åœ¨æ ¹æ ‡ç­¾ä¸­æ›´æ–°å®ƒï¼Œå°±åƒæ˜¯è¿™ä¸ªæ¡ˆä¾‹ğŸŒ°ï¼š

```jsx
class SelectComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = { value: 'cute' };
  }
  handleChange(event) {
    this.setState({value: event.target.value});
  }
  handleSubmit(event) {
    alert('ä½ ä»Šæ—¥ç›¸äº²å¯¹è±¡çš„ç±»å‹æ˜¯: ' + this.state.value);
    event.preventDefault();
  }
  render() {
    return (
      <form onSubmit={(e) => this.handleSubmit(e)}>
        <label>
          ä½ ä»Šæ—¥ç›¸äº²å¯¹è±¡çš„ç±»å‹æ˜¯:
          <select value={this.state.value} onChange={(e) => this.handleChange(e)}>
            <option value="sunshine">é˜³å…‰</option>
            <option value="handsome">å¸…æ°”</option>
            <option value="cute">å¯çˆ±</option>
            <option value="reserved">é«˜å†·</option>
          </select>
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
export default SelectComponent;
```

å¯ä»¥çœ‹åˆ°ä¸è®ºæ˜¯`input`ç±»å‹ä¸º`text`çš„æ§ä»¶è¿˜æ˜¯`textareaã€select`åœ¨å®ç°ä¸º**å—æ§ç»„ä»¶**ä¸Šéƒ½å·®ä¸å¤šã€‚



#### å¤šé€‰select

å¤šé€‰`select`çš„è¯ï¼Œå¯¹æ¯”å•é€‰æ¥è¯´ï¼Œåªæœ‰è¿™ä¸¤å¤„æ”¹åŠ¨ï¼š

- ç»™`select`æ ‡ç­¾è®¾ç½®`multiple`å±æ€§ä¸º`true`
- `select`æ ‡ç­¾`value`ç»‘å®šçš„å€¼ä¸ºä¸€ä¸ªæ•°ç»„

å‘†å‘†è¿™é‡Œä¹Ÿæ¥å°å°çš„å†™ä¸€ä¸ªæ¡ˆä¾‹å§ï¼š

```jsx
class SelectComponent extends React.Component {
  constructor(props) {
    super(props);
    // this.state = { value: 'cute' };
    this.state = { value: ['cute'] };
  }

  handleChange(event) {
    console.log(event.target.value)
    const val = event.target.value;
    const oldValue = this.state.value;
    const i = this.state.value.indexOf(val);
    const newValue = i > -1 ? [...oldValue].splice(i, 1) : [...oldValue, val];
    this.setState({value: newValue});
  }

  handleSubmit(event) {
    alert('ä½ ä»Šæ—¥ç›¸äº²å¯¹è±¡çš„ç±»å‹æ˜¯: ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={(e) => this.handleSubmit(e)}>
        <label>
          ä½ ä»Šæ—¥ç›¸äº²å¯¹è±¡çš„ç±»å‹æ˜¯:
          <select multiple={true} value={this.state.value} onChange={(e) => this.handleChange(e)}>
            <option value="sunshine">é˜³å…‰</option>
            <option value="handsome">å¸…æ°”</option>
            <option value="cute">å¯çˆ±</option>
            <option value="reserved">é«˜å†·</option>
          </select>
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
export default SelectComponent;
```

(ä½†æ˜¯å‘†å‘†åœ¨Macï¼ŒChrome æµ‹è¯•è¿™ä¸ªå¤šé€‰å¥½åƒæ˜¯æœ‰é—®é¢˜çš„)



### åŠ¨æ€è¡¨å•å—æ§ç»„ä»¶æ¡ˆä¾‹

ä¸Šé¢ğŸ‘†å’±ä»¬å®ç°äº†ä¸€äº›ç®€å•çš„å—æ§ç»„ä»¶æ¡ˆä¾‹ï¼Œæ¥ç€æ¥ç©ä¸ªç¨å¾®éš¾ç‚¹çš„ã€‚

å…ˆçœ‹ä¸€ä¸‹æˆ‘ä»¬çš„éœ€æ±‚ï¼š

å®ç°ä¸€ä¸ªç»„ä»¶ï¼Œä¼ å…¥ä»¥ä¸‹æ•°ç»„ï¼Œè‡ªåŠ¨æ¸²æŸ“å‡ºè¡¨å•ï¼š

(`CInput`ä»£è¡¨ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œ`CSelect`ä»£è¡¨ä¸€ä¸ªé€‰æ‹©æ¡†)

```javascript
// å†³å®šè¡¨å•çš„ç»“æ„
const formConfig = [
  {
    Component: CInput,
    label: 'å§“å',
    field: 'name',
  },
  {
    Component: CSelect,
    label: 'æ€§åˆ«',
    field: 'sex',
    options: [{ label: 'ç”·', value: 'man' }, { label: 'å¥³', value: 'woman' }]
  }
]
// å†³å®šè¡¨å•çš„å†…å®¹
this.state = {
  name: 'éœ–å‘†å‘†',
  sex: 'man'
}
```

æ•ˆæœï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/269c41a5c93f4d1ca41c65cd430a1896~tplv-k3u1fbpfcp-zoom-1.image)

ä¹Ÿå°±æ˜¯æ¥å®ç°ä¸€ä¸ªç®€å•çš„åŠ¨æ€è¡¨å•ï¼Œçœ‹çœ‹å—æ§ç»„ä»¶åœ¨å…¶ä¸­çš„åº”ç”¨ã€‚

- `formConfig`å†³å®šäº†è¡¨å•çš„ç»“æ„ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰è¡¨å•ä¸­ä¼šæœ‰å“ªäº›é¡¹

- `this.state`ä¸­å®šä¹‰äº†è¡¨å•ä¸­å„é¡¹çš„å€¼æ˜¯ä»€ä¹ˆï¼Œå®ƒä¸`formConfig`æ˜¯é `formConfig`ä¸­å„é¡¹çš„`field`å­—æ®µæ¥å»ºç«‹é“¾æ¥çš„ã€‚

çŸ¥é“äº†ä¸Šé¢ğŸ‘†è¿™äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå¿«å†™å‡ºè¿™ä¸ªåŠ¨æ€è¡¨å•ç»„ä»¶çš„å¤§æ¦‚æ ·å­äº†ï¼š

(æˆ‘ä»¬å°±æŠŠè¿™ä¸ªç»„ä»¶å‘½åä¸º`formComponent`å§ï¼Œé‡ç‚¹çœ‹`render`éƒ¨åˆ†)

```jsx
import React, { Component } from 'react';
import { CInput, CSelect } from './components'
export default class FormComponent extends Component {
	constructor (props) {
    super(props);
    this.state = {
      name: 'éœ–å‘†å‘†',
      sex: 'man'
    }
  }
  formConfig = [
    {
      Component: CInput,
      label: 'å§“å',
      field: 'name',
    },
    {
      Component: CSelect,
      label: 'æ€§åˆ«',
      field: 'sex',
      options: [{ label: 'ç”·', value: 'man' }, { label: 'å¥³', value: 'woman' }]
    }
  ]
  render () { // é‡ç‚¹åœ¨è¿™
    return (
      <form style={{marginTop: '50px'}}>
        {
          this.formConfig.map((item) => { // æšä¸¾formConfig
            const { Type, field, name } = item;
            const ControlComponent = item.Component; // æå–Component
            return (
              <ControlComponent key={field} />
            )
          })
        }
      </form>
    )
  }
}
```

å¯ä»¥çœ‹åˆ°ï¼Œ`render`éƒ¨åˆ†æˆ‘ä»¬åšäº†è¿™ä¹ˆå‡ ä»¶äº‹ï¼š

- æšä¸¾`formConfig`æ•°ç»„
- æå–å‡ºæ¯ä¸€é¡¹é‡Œçš„`Component`ï¼Œèµ‹å€¼ç»™`ControlComponent`
- æ¸²æŸ“å‡ºæ¯ä¸€é¡¹`Component`

`ControlComponent`å˜é‡çš„æ„ä¹‰åœ¨äºå‘Šè¯‰`React`ï¼Œéœ€è¦æ¸²æŸ“å‡ºå“ªä¸€ä¸ªç»„ä»¶ï¼Œå¦‚æœ`item.Component`æ˜¯`CInput`ï¼Œé‚£ä¹ˆæœ€ç»ˆæ¸²æŸ“å‡ºçš„å°±æ˜¯`<CInput />`ã€‚

è¿™æ ·å°±ä¿è¯äº†èƒ½æŠŠ`formConfig`æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªè¡¨å•é¡¹éƒ½æ¸²æŸ“å‡ºæ¥ï¼Œä½†æ˜¯è¿™äº›è¡¨å•é¡¹ç°åœ¨è¿˜æ˜¯ä¸å—æˆ‘ä»¬æ§åˆ¶çš„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å‰é¢å­¦åˆ°çš„`value`å’Œ`onChange`å’Œæ¯ä¸ª`ControlComponent`å»ºç«‹è”ç³»ï¼Œå°±åƒæ˜¯è¿™æ ·ï¼š

```jsx
<ControlComponent
  key={field}
  name={field}
  value={this.state[field]}
  onChange={this.onChange}
  {...item}
/>
```

æˆ‘ä»¬æŠŠ`this.state[field]`è®¾ç½®åˆ°`value`ä¸Šï¼ŒæŠŠ`this.onChange`è®¾ç½®åˆ°`onChange`å±æ€§ä¸Šã€‚(å¯æƒ³è€ŒçŸ¥ï¼Œ`CInput`å’Œ`CSelect`ç»„ä»¶ä¸­å°±èƒ½ç”¨`this.props`æ¥æ¥æ”¶ä¼ å…¥çš„å±æ€§äº†ï¼Œä¾‹å¦‚`this.props.value`)

é‚£ä¹ˆè¿™æ—¶å€™`value`å·²ç»ç¡®å®šäº†ï¼Œå®ƒå°±æ˜¯ç”±`this.state[field]`å†³å®šçš„ï¼Œå¦‚æœ`field`æ˜¯`"sex"`çš„è¯ï¼Œ`value`çš„å€¼å°±æ˜¯`"man"`ã€‚

æ‰€ä»¥æ¥çœ‹çœ‹`onChange`æ–¹æ³•è¯¥æ€æ ·å†™ï¼š

```jsx
onChange = (event, field) => {
  const target = event.target;
  this.setState({
    [field]: target.value
  })
}
```

è¿™ä¸ªæ–¹æ³•å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå®ƒæ¥å—ä¸€ä¸ª`event`å’Œ`field`ï¼Œåœ¨`event`ä¸­å°±å¯ä»¥è·å–åˆ°ç”¨æˆ·è¾“å…¥/é€‰æ‹©çš„å€¼äº†ã€‚

å¥½çš„ğŸ‘Œï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬å¿«é€Ÿçš„çœ‹ä¸€ä¸‹`CInput`å’Œ`CSelect`æ˜¯å¦‚ä½•å®ç°çš„å§ï¼š

*components/CInput.jsx*:

```jsx
import React, { Component } from 'react';

export default class CInput extends Component {
  constructor (props) {
    super(props);
  }
  render () {
    const { name, field, value, onChange } = this.props;
    return (
      <>
        <label>
          {name}
        </label>
        <input name={field} value={value} onChange={(e) => onChange(e, field)} />
      </>
    )
  }
}
```

*components/CSelect.jsx*:

```jsx
import React, { Component } from 'react';

export default class CSelect extends Component {
  constructor (props) {
    super(props);
  }
  render () {
    const { name, field, options, value, onChange } = this.props;
    return (
      <>
        <label>
          {name}
        </label>
        <select name={field} value={value} onChange={(e) => onChange(e, field)}>
          {options.length>0 && options.map(option => {
            return <option key={option.value} value={option.value}>{option.label}</option>
          })}
        </select>
      </>
    )
  }
}
```

å½“ç„¶ï¼Œè¿™é‡Œæ¼”ç¤ºçš„ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„åŠ¨æ€è¡¨å•çš„å®ç°ï¼Œå¦‚æœä½ æƒ³è¦åœ¨é¡¹ç›®ä¸­å®ç°çš„è¯è¦è¿œæ¯”è¿™ä¸ªå¤æ‚å¤šäº†ã€‚

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/558a76a01cf84235be99690189802d37~tplv-k3u1fbpfcp-zoom-1.image)

### éå—æ§ç»„ä»¶

ä¸Šé¢ğŸ‘†å‘å¤§å®¶å±•ç¤ºçš„æ˜¯å—æ§ç»„ä»¶çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µè¿˜æœ‰ç›¸å…³æ“ä½œï¼Œå¯¹äºå—æ§ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ª`çŠ¶æ€æ›´æ–°`(ä¾‹å¦‚`this.state.username`)ç¼–å†™ä¸€ä¸ª`äº‹ä»¶å¤„ç†ç¨‹åº`(ä¾‹å¦‚`this.setState({ username: e.target.value })`)ã€‚

é‚£ä¹ˆè¿˜æœ‰ä¸€ç§åœºæ™¯æ˜¯ï¼šæˆ‘ä»¬ä»…ä»…æ˜¯æƒ³è¦è·å–æŸä¸ªè¡¨å•å…ƒç´ çš„å€¼ï¼Œè€Œä¸å…³å¿ƒå®ƒæ˜¯å¦‚ä½•æ”¹å˜çš„ã€‚å¯¹äºè¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåº”å¯¹çš„æ–¹æ³•å—ğŸ¤”ï¸ï¼Ÿ

å””...`input`æ ‡ç­¾å®ƒå®é™…ä¹Ÿæ˜¯ä¸€ä¸ª`DOM`å…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ç”¨è·å–`DOM`å…ƒç´ ä¿¡æ¯çš„æ–¹å¼æ¥è·å–è¡¨å•å…ƒç´ çš„å€¼å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ä½¿ç”¨`ref`ã€‚

å°±åƒä¸‹é¢ğŸ‘‡è¿™ä¸ªæ¡ˆä¾‹ä¸€æ ·ï¼š

```jsx
import React, { Component } from 'react';

export class UnControll extends Component {
  constructor (props) {
    super(props);
    this.inputRef = React.createRef();
  }
  handleSubmit = (e) => {
    console.log('æˆ‘ä»¬å¯ä»¥è·å¾—inputå†…çš„å€¼ä¸º', this.inputRef.current.value);
    e.preventDefault();
  }
  render () {
    return (
      <form onSubmit={e => this.handleSubmit(e)}>
        <input defaultValue="lindaidai" ref={this.inputRef} />
        <input type="submit" value="æäº¤" />
      </form>
    )
  }
}
```

åœ¨è¾“å…¥æ¡†è¾“å…¥å†…å®¹åï¼Œç‚¹å‡»æäº¤æŒ‰é’®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`this.inputRef`æˆåŠŸæ‹¿åˆ°`input`çš„`DOM`å±æ€§ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦åƒå—æ§ç»„ä»¶ä¸€æ ·ï¼Œå•ç‹¬çš„ä¸ºæ¯ä¸ªè¡¨å•å…ƒç´ ç»´æŠ¤ä¸€ä¸ªçŠ¶æ€ã€‚

åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨`defaultValue`å±æ€§æ¥æŒ‡å®šè¡¨å•å…ƒç´ çš„é»˜è®¤å€¼ã€‚



### ç‰¹æ®Šçš„æ–‡ä»¶fileæ ‡ç­¾

å¦å¤–åœ¨`input`ä¸­è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼Œé‚£å°±æ˜¯`file`ç±»å‹çš„è¡¨å•æ§ä»¶ã€‚

**å¯¹äºfileç±»å‹çš„è¡¨å•æ§ä»¶å®ƒå§‹ç»ˆæ˜¯ä¸€ä¸ªä¸å—æ§åˆ¶çš„ç»„ä»¶ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸æ˜¯ä»¥ç¼–ç¨‹æ–¹å¼è®¾ç½®ã€‚**

ä¾‹å¦‚æˆ‘ç°åœ¨æƒ³è¦é€šè¿‡çŠ¶æ€æ›´æ–°æ¥æ§åˆ¶å®ƒï¼š

```jsx
import React, { Component } from 'react';

export default class UnControll extends Component {
  constructor (props) {
    super(props);
    this.state = {
      files: []
    }
  }
  handleSubmit = (e) => {
    e.preventDefault();
  }
  handleFile = (e) => {
    console.log(e.target.files);
    const files = [...e.target.files];
    console.log(files);
    this.setState({
      files
    })
  }
  render () {
    return (
      <form onSubmit={e => this.handleSubmit(e)}>
        <input type="file" value={this.state.files} onChange={(e) => this.handleFile(e)} />
        <input type="submit" value="æäº¤" />
      </form>
    )
  }
}
```

åœ¨é€‰æ‹©äº†æ–‡ä»¶ä¹‹åï¼Œæˆ‘è¯•å›¾ç”¨`setState`æ¥æ›´æ–°ï¼Œç»“æœå´æŠ¥é”™äº†ï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33381befaff74f39adf7bc30e4896801~tplv-k3u1fbpfcp-zoom-1.image)

æ‰€ä»¥æˆ‘ä»¬åº”å½“ä½¿ç”¨éå—æ§ç»„ä»¶çš„æ–¹å¼æ¥è·å–å®ƒçš„å€¼ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š

```jsx
import React, { Component } from 'react';

export default class FileComponent extends Component {
  constructor (props) {
    super(props);
    this.fileRef = React.createRef();
  }
  handleSubmit = (e) => {
    console.log('æˆ‘ä»¬å¯ä»¥è·å¾—fileçš„å€¼ä¸º', this.fileRef.current.files);
    e.preventDefault();
  }
  render () {
    return (
      <form onSubmit={e => this.handleSubmit(e)}>
        <input type="file" ref={this.fileRef} />
        <input type="submit" value="æäº¤" />
      </form>
    )
  }
}
```

è¿™é‡Œè·å–åˆ°çš„`files`æ˜¯ä¸€ä¸ªæ•°ç»„å“ˆï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æ²¡æœ‰å¼€å¯å¤šé€‰çš„è¯ï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦å§‹ç»ˆæ˜¯`1`ï¼Œå¼€å¯å¤šé€‰ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦æ·»åŠ `multiple`å±æ€§å³å¯ï¼š

```jsx
<input type="file" multiple ref={this.fileRef} />
```

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c566373d8c3f4d30b1e002fe1152b259~tplv-k3u1fbpfcp-zoom-1.image)

OKï¼Œç›¸ä¿¡å¤§å®¶å¯¹è¿™ä¸¤ç»„æ¦‚å¿µå·²ç»æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ã€‚ä»€ä¹ˆï¼Ÿä½ é—®æˆ‘å®é™…çš„åº”ç”¨åœºæ™¯ï¼Ÿ

å””...è¿™ä¸ªç”¨Reactå®˜æ–¹çš„è¯æ¥è¯´ï¼Œç»å¤§éƒ¨åˆ†æ—¶å€™æ¨èä½¿ç”¨`å—æ§ç»„ä»¶`æ¥å®ç°è¡¨å•ï¼Œå› ä¸ºåœ¨å—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®ç”±`React`ç»„ä»¶è´Ÿè´£å¤„ç†ï¼›å½“ç„¶å¦‚æœé€‰æ‹©`å—å—æ§ç»„ä»¶`çš„è¯ï¼Œè¡¨å•æ•°æ®å°±ç”±`DOM`æœ¬èº«å¤„ç†ã€‚

å¦å¤–åœ¨å­¦ä¹ ä¸¤è€…çš„æ—¶å€™ï¼Œå‘†å‘†ä¹Ÿå‘ç°äº†ä¸€äº›å†™çš„æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼Œæ¯”è¿™ç¯‡æ›´æ·±å…¥ï¼Œæ¨èç»™å¤§å®¶å“Ÿï¼š

- [ã€Šåœ¨å®é™…ä¸šåŠ¡ä¸­å¦‚ä½•çµæ´»è¿ç”¨å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶ã€‹](https://zhuanlan.zhihu.com/p/37579677)
- [ã€Šå…³äºå—æ§ç»„ä»¶çš„æ€è€ƒã€‹](https://blog.csdn.net/neoveee/article/details/95873911)



## åè¯­

ä½ ç›¼ä¸–ç•Œï¼Œæˆ‘ç›¼æœ›ä½ æ— bugã€‚è¿™ç¯‡æ–‡ç« å°±ä»‹ç»åˆ°è¿™é‡Œã€‚

ä¸»è¦æ˜¯å‘å¤§å®¶ä»‹ç»äº†ä¸€ä¸‹æ§ä»¶ä¸éæ§ä»¶ç»„ä»¶çš„åŒºåˆ«å’Œç”¨æ³•ï¼Œå‘†å‘†ä¹Ÿç»ˆäº`"é‡æ“æ—§ä¸š"`å†™èµ·äº†æ–‡ç« ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿä¼šè¶Šæ¥è¶Šå¥½çš„ï¼

å–œæ¬¢ã€Œéœ–å‘†å‘†ã€çš„å°ä¼™è¿˜å¸Œæœ›å¯ä»¥å…³æ³¨éœ–å‘†å‘†çš„å…¬ä¼—å· LinDaiDai æˆ–è€…æ‰«ä¸€æ‰«ä¸‹é¢çš„äºŒç»´ç ğŸ‘‡ğŸ‘‡ğŸ‘‡.

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c98312ef71342928e2821db53458e11~tplv-k3u1fbpfcp-zoom-1.image)

æˆ‘ä¼šä¸å®šæ—¶çš„æ›´æ–°ä¸€äº›å‰ç«¯æ–¹é¢çš„çŸ¥è¯†å†…å®¹ä»¥åŠè‡ªå·±çš„åŸåˆ›æ–‡ç« ğŸ‰

ä½ çš„é¼“åŠ±å°±æ˜¯æˆ‘æŒç»­åˆ›ä½œçš„ä¸»è¦åŠ¨åŠ› ğŸ˜Š.

ç›¸å…³æ¨è:

[ã€Šå…¨ç½‘æœ€è¯¦bpmn.jsæ•™æã€‹](https://juejin.im/post/5def372af265da33c84a4818)

[ã€Šã€å»ºè®®æ”¹æˆã€‘è¯»å®Œè¿™ç¯‡ä½ è¿˜ä¸æ‡‚Babelæˆ‘ç»™ä½ å¯„å£ç½©ã€‹](https://juejin.im/post/5e477139f265da574c566dda)

[ã€Šã€å»ºè®®æ˜Ÿæ˜Ÿã€‘è¦å°±æ¥45é“Promiseé¢è¯•é¢˜ä¸€æ¬¡çˆ½åˆ°åº•(1.1wå­—ç”¨å¿ƒæ•´ç†)ã€‹](https://juejin.im/post/5e58c618e51d4526ed66b5cf)

[ã€Šã€å»ºè®®ğŸ‘ã€‘å†æ¥40é“thisé¢è¯•é¢˜é…¸çˆ½ç»§ç»­(1.2wå­—ç”¨æ‰‹æ•´ç†)ã€‹](https://juejin.im/post/5e6358256fb9a07cd80f2e70)

[ã€Šã€ä½•ä¸ä¸‰è¿ã€‘æ¯”ç»§æ‰¿å®¶ä¸šè¿˜è¦ç®€å•çš„JSç»§æ‰¿é¢˜-å°è£…ç¯‡(ç‰›åˆ€å°è¯•)ã€‹](https://juejin.im/post/5e707417e51d45272054d5d3)

[ã€Šã€ä½•ä¸ä¸‰è¿ã€‘åšå®Œè¿™48é“é¢˜å½»åº•å¼„æ‡‚JSç»§æ‰¿(1.7wå­—å«è¾›æ•´ç†-è¿”ç’å½’çœŸ)ã€‹](https://juejin.im/post/5e75e22951882549027687f9)

[ã€Šéœ–å‘†å‘†çš„è¿‘æœŸé¢è¯•128é¢˜æ±‡æ€»(å«è¶…è¯¦ç»†ç­”æ¡ˆ) | æ˜é‡‘æŠ€æœ¯å¾æ–‡ã€‹](https://juejin.im/post/5eb55ceb6fb9a0436748297d)

