## DDæ¯å‘¨å‰ç«¯ä¸ƒé¢˜è¯¦è§£-ç¬¬äº”æœŸ

## ç³»åˆ—ä»‹ç»

ä½ ç›¼ä¸–ç•Œï¼Œæˆ‘ç›¼æœ›ä½ æ— `bug`ã€‚Hello å¤§å®¶å¥½ï¼æˆ‘æ˜¯éœ–å‘†å‘†ï¼

å‘†å‘†æ¯å‘¨éƒ½ä¼šåˆ†äº«ä¸ƒé“å‰ç«¯é¢˜ç»™å¤§å®¶ï¼Œç³»åˆ—åç§°å°±æ˜¯ã€ŒDDæ¯å‘¨ä¸ƒé¢˜ã€ã€‚

ç³»åˆ—çš„å½¢å¼ä¸»è¦æ˜¯ï¼š`3é“JavaScript` + `2é“HTML` + `2é“CSS`ï¼Œå¸®åŠ©æˆ‘ä»¬å¤§å®¶ä¸€èµ·å·©å›ºå‰ç«¯åŸºç¡€ã€‚

æ‰€æœ‰é¢˜ç›®ä¹Ÿéƒ½ä¼šæ•´åˆè‡³ [LinDaiDai/niubility-coding-js](https://github.com/LinDaiDai/niubility-coding-js/issues) çš„`issues`ä¸­ï¼Œæ¬¢è¿å¤§å®¶æä¾›æ›´å¥½çš„è§£é¢˜æ€è·¯ï¼Œè°¢è°¢å¤§å®¶ğŸ˜ã€‚

ä¸€èµ·æ¥çœ‹çœ‹æœ¬å‘¨çš„ä¸ƒé“é¢˜å§ã€‚



## æ­£é¢˜

### ä¸€ã€å®ç°maskå‡½æ•°å°†"123456"è½¬ä¸º"##3456",åªä¿ç•™æœ€åå››ä¸ªå­—ç¬¦

(é¢˜ç›®æ¥æºï¼š[https://github.com/30-seconds/30-seconds-of-interviews](https://github.com/30-seconds/30-seconds-of-interviews))

é¦–å…ˆä»‹ç»ä¸€ä¸‹é¢˜ç›®çš„æ„æ€å§ğŸ˜„ï¼Œæ¡ˆä¾‹ğŸŒ°å¦‚ä¸‹ï¼š

```javascript
const mask = (str, maskChar = '#') => {
	// ä»£ç 
}
console.log(mask('123456')); // '##3456'
console.log(mask('lindaidai')); // '#####idai'
```

è¿™é“é¢˜çš„éš¾åº¦åº”è¯¥æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œå¤„ç†æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šã€‚å‘†å‘†è¿™è¾¹ä¸»è¦æ˜¯è®²è§£ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨`padStart`æ¥å®ç°çš„ã€‚

ç®€å•ä»‹ç»ä¸€ä¸‹`padStart`æ–¹æ³•å§ï¼Œå®ƒæ˜¯`ES8`æ–°å¢çš„å®ä¾‹å‡½æ•°ï¼Œä¸å®ƒä½œç”¨å·®ä¸å¤šçš„è¿˜æœ‰ä¸€ä¸ªå«`padEnd`çš„å‡½æ•°ï¼š

- `String.prototype.padStart`
- `String.prototype.padEnd`

**ä½œç”¨**ï¼šå…è®¸å°†ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²æ·»åŠ åˆ°åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚

**è¯­æ³•**ï¼š

```javascript
padStart(targetLength, [padString])
```

- `targetLength`: å¿…å¡«ï¼Œå½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚
- `padString`: å¯é€‰ï¼Œå¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼Œæ­¤å‚æ•°çš„ç¼ºçœå€¼ä¸º`" "`ã€‚

ä¾‹å¦‚ï¼š

```javascript
'x'.padStart(4, 'ab') // 'abax'
'x'.padEnd(5, 'ab') // 'xabab'
```

å“ˆå“ˆï¼Œå¦å¤–æƒ³è¦äº†è§£å¦‚ä½•å®ç°ä¸€ä¸ª`padStart`çš„å°ä¼™ä¼´å¯ä»¥çœ‹å‘†å‘†ä¹‹å‰ä¸€ç¯‡æ–‡ç« å“Ÿï¼š[DDæ¯å‘¨å‰ç«¯ä¸ƒé¢˜è¯¦è§£-ç¬¬äºŒæœŸ](https://juejin.im/post/5ed732dfe51d457879333878#heading-3)

**è¨€å½’æ­£ä¼ **ï¼Œè®©æˆ‘ä»¬å›åˆ°è¿™é“é¢˜ç›®å“ˆï¼Œé¦–å…ˆè®©æˆ‘ä»¬æ¥å¤„ç†ä¸€ä¸‹è¾“å…¥å‚æ•°è¾¹ç•Œçš„æƒ…å†µï¼Œä¾‹å¦‚è¾“å…¥çš„`str`ä¸å­˜åœ¨æˆ–è€…é•¿åº¦å°äº`4`çš„æ—¶å€™ï¼š

```javascript
const mask = (str, maskChar = '#') => {
  if (!str || str.length <= 4) return str;
}
```

å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åªä¿ç•™ä½`str`çš„æœ«å°¾å››ä¸ªå­—ç¬¦ï¼Œç„¶åä½¿ç”¨`padStart`å°†è¿™å››ä¸ªå­—ç¬¦å¡«å……è‡³`str.length`å³å¯ï¼Œå¦‚ä¸‹ï¼š

```javascript
const mask = (str, maskChar = '#') => {
  if (!str || str.length <= 4) return str;
  return str.slice(-4).padStart(str.length, maskChar);
}
```

- `slice`ä¸ä¼šå½±å“åŸæœ¬çš„å­—ç¬¦ä¸²
- ä½¿ç”¨`padStart`å¡«å……å³å¯

[https://github.com/LinDaiDai/niubility-coding-js/issues/30](https://github.com/LinDaiDai/niubility-coding-js/issues/30)



### äºŒã€ä»‹ç»ä¸€ä¸‹NaNå¹¶å®ç°ä¸€ä¸ªisNaN

**ä»‹ç»ä¸€ä¸‹NaN**ï¼š

- `NaN`å±æ€§æ˜¯ä»£è¡¨éæ•°å­—å€¼çš„ç‰¹æ®Šå€¼ï¼Œè¯¥å±æ€§ç”¨äºæŒ‡ç¤ºæŸä¸ªå€¼ä¸æ˜¯æ•°å­—ï¼›
- `NaN`æ˜¯ä¸ç­‰äº`NaN`çš„ï¼Œå³`NaN === NaN`çš„ç»“æœæ˜¯`false`ï¼›
- ä½¿ç”¨`Object.is()`æ¥æ¯”è¾ƒä¸¤ä¸ª`NaN`ç»“æœæ˜¯`true`ï¼Œå³`Object.is(NaN, NaN)`çš„ç»“æœæ˜¯`true`ï¼›
- `typeof NaN`ä¸º`"number"`ï¼›
- æ–¹æ³•`parseInt()`å’Œ`parseFloat()`åœ¨ä¸èƒ½è§£ææŒ‡å®šçš„å­—ç¬¦ä¸²æ—¶å°±è¿”å›è¿™ä¸ªå€¼ï¼›
- å¯ä»¥ä½¿ç”¨`isNaN`æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯`NaN`ï¼Œå®ƒæ˜¯`JS`å†…ç½®å¯¹è±¡`Number`ä¸Šçš„é™æ€æ–¹æ³•ã€‚

(å…³äºç¬¬ä¸‰ç‚¹ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« å“Ÿï¼Œé‡Œé¢çš„ã€Œç¬¬äºŒè¡¥ï¼šJSç±»å‹æ£€æµ‹-`Object.is()å’Œ===çš„åŒºåˆ«`ã€æœ‰æåˆ°ï¼š[è¯»ã€Šä¸‰å…ƒ-JSçµé­‚ä¹‹é—®ã€‹æ€»ç»“,ç»™è‡ªå·±çš„ä¸€ä»½åŸç”ŸJSè¡¥ç»™(ä¸Š)](https://juejin.im/post/5e8dc6fd6fb9a03c97753dea#heading-9))

**å®ç°ä¸€ä¸ªisNaN**:

å¯¹äº`isNaN`çš„`polyfill`å®ç°èµ·æ¥å°±æ¯”è¾ƒç®€å•äº†ï¼Œåªéœ€è¦åˆ©ç”¨`NaN`ä¸ç­‰äºå®ƒè‡ªèº«çš„è¿™ä¸€ç‚¹å³å¯ï¼š

```javascript
const isNaN = v => v !== v;
```

[https://github.com/LinDaiDai/niubility-coding-js/issues/31](https://github.com/LinDaiDai/niubility-coding-js/issues/31)



### ä¸‰ã€æŒ‰ä½å–åï¼Œä¸ºä»€ä¹ˆ`~2 = -3`?

æ¥ä¸‹æ¥ï¼Œåˆ†äº«ä¸€é“ä¸`JavaScript`åŸç”Ÿæ— å…³çš„é¢˜ç›®å§ï¼Œä¸»è¦ä¹Ÿæ˜¯çœ‹åˆ°ç¾¤é‡Œæœ‰å°ä¼™ä¼´é—®äº†å…³äºæŒ‰ä½å–å`~`çš„ç”¨æ³•ï¼Œè¿™è¾¹ç»Ÿä¸€ç§‘æ™®ä¸€ä¸‹ï¼ŒğŸ˜ã€‚

æ­£å¸¸ä¸€ä¸ªæ•°å­—ï¼Œä¾‹å¦‚`1`å’Œ`2`ï¼Œæˆ–è€…`-1`å’Œ`-2`ã€‚

å¦‚æœæˆ‘ä»¬å¯¹å®ƒä»¬è¿›è¡ŒæŒ‰ä½å–åçš„è¯ï¼Œç»“æœä¼šæ˜¯è¿™æ ·ï¼š

- `~1 = -2`
- `~2 = -3`
- `~-1 = 0`
- `~-2 = 1`

çœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œè®©æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥çœ‹çœ‹å®ç°çš„è¿‡ç¨‹å“ˆã€‚

åœ¨è¿™é‡Œå…¶å®æ˜¯åˆ†äº†**æ­£æ•°å’Œè´Ÿæ•°**çš„ï¼Œå› ä¸ºç¬¦å·ä¸åŒå–åçš„è¿‡ç¨‹ä¹Ÿä¼šä¸åŒã€‚



#### 1.1 æ­£æ•°æŒ‰ä½å–å

å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ­£æ•°çš„æŒ‰ä½å–åã€‚

æ¯”å¦‚å…ˆçœ‹çœ‹`~1 = -2`ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

**1. åè¿›åˆ¶è½¬ä¸ºäºŒè¿›åˆ¶åŸç **

é¦–å…ˆå°†åè¿›åˆ¶çš„`1`è½¬åŒ–ä¸ºäºŒè¿›åˆ¶åŸç ä¸ºï¼š`0000 0001`



**2. äºŒè¿›åˆ¶åŸç æŒ‰ä½å–å**

ä¹‹åå°†åŸç æŒ‰ä½å–åï¼š

ä¹Ÿå°±æ˜¯å°†`0000 0001` => `1111 1110`

 (å–ååº”è¯¥çŸ¥é“å•¥æ„æ€å§ï¼Ÿå°±æ˜¯`0`æ¢æˆ`1`ï¼Œ`1`æ¢æˆ`0`)



**3. å–ååçš„äºŒè¿›åˆ¶è½¬ä¸ºåŸç **

å†å°†å–ååçš„äºŒè¿›åˆ¶ç è½¬ä¸ºåŸç äºŒè¿›åˆ¶ï¼š

ä¹Ÿå°±æ˜¯å°†`1111 1110` => `1000 0010`

è¿™é‡Œä½ ä¼°è®¡çœ‹ç€éƒ½ç‚¹æ‡µäº†ï¼Œå½“æˆ‘ä»¬å°†**å–ååçš„äºŒè¿›åˆ¶**è½¬ä¸º**åŸç äºŒè¿›åˆ¶**çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æœ‰ä»¥ä¸‹ä¸¤æ­¥çš„ï¼š

1. éœ€è¦åˆ¤æ–­å–ååçš„äºŒè¿›åˆ¶çš„ç¬¬ä¸€ä¸ªä½æ˜¯ä¸æ˜¯`1`ï¼Œè¿™ä¸ªç¬¬ä¸€ä½æˆ‘ä»¬ç§°ä¹‹ä¸º**ç¬¦å·ä½**ï¼Œå¦‚æœæ˜¯`1`çš„è¯å°±è¡¨ç¤ºå³å°†è¦è½¬æˆçš„æ•°æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œå¦‚æœæ˜¯`0`çš„è¯è¡¨ç¤ºå³å°†è¦è½¬çš„æ•°æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œè¿™ä¸ªç¬¦å·ä½æ˜¯ä¸èƒ½åŠ¨çš„ï¼›åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°`1111 1110`çš„ç¬¬ä¸€ä½æ˜¯`1`ï¼Œæ‰€ä»¥è¡¨ç¤ºå³å°†è¦è½¬çš„æ•°æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸åŠ¨å®ƒã€‚
2. ç„¶åå°†é™¤äº†ç¬¬ä¸€ä½ä»¥å¤–å…¶å®ƒä½æ•°å–åå¹¶`+1`ã€‚æ‰€ä»¥ä¼šæœ‰è¿™ä¹ˆä¸¤ä¸ªè¿‡ç¨‹ï¼š
   - `1111 1110` => `1000 0001`
   - `1000 0001` => `1000 0010` (è¿™æ­¥æ˜¯å¯¹ä¸Šä¸€æ­¥çš„ç»“æœ`+1`ï¼Œå› ä¸ºä¸Šä¸€æ­¥çš„æœ€åä¸€ä¸ªæ•°æ˜¯`1`ï¼Œæ‰€ä»¥å®ƒå†åŠ ä¸Š`1`å°±éœ€è¦å‘å‰è¿›ä¸€ä½äº†ï¼Œå› æ­¤å˜æˆäº†`1000 0010`)



**4. å°†åŸç äºŒè¿›åˆ¶è½¬ä¸ºåè¿›åˆ¶**

æœ€åä¸€æ­¥å°±æ˜¯å°†æˆ‘ä»¬å‰é¢å¾—åˆ°çš„`1000 0010`è¿™ä¸ªäºŒè¿›åˆ¶è½¬åŒ–ä¸ºåè¿›åˆ¶äº†ã€‚

ç¬¬ä¸€ä½ç¬¦å·ä½ï¼Œæ˜¯`1`ï¼Œåˆ™è¡¨ç¤ºæ˜¯ä¸ªè´Ÿæ•°ï¼Œæ‰€ä»¥ç»“æœä¸º`-2`ã€‚



OKğŸ‘Œï¼Œææ‡‚äº†è¿™ä¸ªæ­¥éª¤ä¹‹åå†è®©æˆ‘ä»¬è‡ªå·±æ¥è½¬æ¢ä¸€ä¸‹`~2 = -3`å§ï¼š

```
1. 0000 0010
2. 1111 1101
3. 1000 0011
4. -3
```



**æ­£æ•°æŒ‰ä½å–åæ€»ç»“**

1. åè¿›åˆ¶è½¬ä¸ºäºŒè¿›åˆ¶åŸç 
2. äºŒè¿›åˆ¶åŸç æŒ‰ä½å–å
3. ç¬¦å·ä½ä¿ç•™ï¼Œå…¶ä½™ä½å–å+1
4. äºŒè¿›åˆ¶åŸç è½¬ä¸ºåè¿›åˆ¶



#### 1.2 è´Ÿæ•°æŒ‰ä½å–å

è´Ÿæ•°çš„æŒ‰ä½å–åå’Œä¸Šé¢å°±æœ‰äº›ä¸ä¸€æ ·äº†ï¼Œä¸»è¦æ˜¯ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥è°ƒæ¢ä¸€ä¸‹é¡ºåºï¼š

1. åè¿›åˆ¶è½¬ä¸ºäºŒè¿›åˆ¶åŸç 
2. ç¬¦å·ä½ä¿ç•™ï¼Œå…¶ä½™ä½å–å+1
3. äºŒè¿›åˆ¶åŸç æŒ‰ä½å–å
4. äºŒè¿›åˆ¶åŸç è½¬ä¸ºåè¿›åˆ¶



ä¾‹å¦‚ï¼š`~-1 =0 `çš„è½¬æ¢è¿‡ç¨‹ï¼š

**1. åè¿›åˆ¶è½¬ä¸ºäºŒè¿›åˆ¶åŸç **

è¿™æ­¥å’Œæ­£æ•°æŒ‰ä½å–åæ˜¯ä¸€æ ·çš„ï¼š

`-1` => `1000 0001`



**2. ç¬¦å·ä½ä¿ç•™ï¼Œå…¶ä½™ä½å–å+1**

è½¬æ¢è¿‡ç¨‹ï¼š

- `1000 0001` => `1111 1110` (å–å)
- `1111 1110` => `1111 1111` (å–åå + 1)



**3. äºŒè¿›åˆ¶åŸç æŒ‰ä½å–å**

å°†åˆšåˆšå¾—åˆ°çš„å†è¿›è¡ŒæŒ‰ä½å–åï¼š

`1111 1111` => `0000 0000`



**4. äºŒè¿›åˆ¶åŸç è½¬ä¸ºåè¿›åˆ¶**

`0000 0000` => `0`



OKğŸ‘Œï¼Œç°åœ¨è‡ªå·±æ¥è½¬æ¢ä¸€ä¸‹`~-2 = 1`å§ï¼š

```
1. 1000 0010
2. 1111 1110
3. 0000 0001
4. 1
```

è¿™é‡Œæ²¡å•¥è¯€çªï¼Œå…³é”®å°±æ˜¯è¦è®°ä½è½¬æ¢çš„è¿‡ç¨‹ç„¶åä¸æ–­çš„ç»ƒä¹ å§ ğŸ˜‚ã€‚

å¦å¤–å…³äº`~~`çš„ç”¨æ³•è¿˜å¯ä»¥çœ‹å‘†å‘†çš„å¦ä¸€ç¯‡æ–‡ç« å“Ÿ[ã€ŠJSä¸­æŒ‰ä½å–åè¿ç®—ç¬¦~åŠå…¶å®ƒè¿ç®—ç¬¦ã€‹](https://www.jianshu.com/p/3c0f56f3190a)

[https://github.com/LinDaiDai/niubility-coding-js/issues/32](https://github.com/LinDaiDai/niubility-coding-js/issues/32)



### å››ã€çŸ¥é“`insertAdjacentHTML`æ–¹æ³•å—ï¼Ÿ

è¿™ä¸ªæ–¹æ³•æ˜¯å‘†å‘†æœ€è¿‘åœ¨çœ‹å…¬å¸é¡¹ç›®ä»£ç æ—¶äº†è§£åˆ°çš„ï¼Œä¹‹å‰ä¸€ç›´æ²¡æœ‰æ³¨æ„å®ƒã€‚

é¦–å…ˆå¯¹äºå®ƒçš„ç”¨æ³•ï¼š

> **`insertAdjacentHTML()`** æ–¹æ³•å°†æŒ‡å®šçš„æ–‡æœ¬è§£æä¸º [`Element`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element) å…ƒç´ ï¼Œå¹¶å°†ç»“æœèŠ‚ç‚¹æ’å…¥åˆ°DOMæ ‘ä¸­çš„æŒ‡å®šä½ç½®ã€‚å®ƒä¸ä¼šé‡æ–°è§£æå®ƒæ­£åœ¨ä½¿ç”¨çš„å…ƒç´ ï¼Œå› æ­¤å®ƒä¸ä¼šç ´åå…ƒç´ å†…çš„ç°æœ‰å…ƒç´ ã€‚è¿™é¿å…äº†é¢å¤–çš„åºåˆ—åŒ–æ­¥éª¤ï¼Œä½¿å…¶æ¯”ç›´æ¥ä½¿ç”¨innerHTMLæ“ä½œæ›´å¿«ã€‚

å…¶æ¬¡å®ƒçš„ä½œç”¨å¯¹è±¡æ˜¯ä¸€ä¸ªå…ƒç´ `element`ï¼Œä¾‹å¦‚`const container = document.getElementById('container')`

è¯­æ³•ä¸Šå‘¢ï¼š

```
element.insertAdjacentHTML(position, text);
```

- `position`ï¼šä¸€ä¸ª`DOMString`ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºæ’å…¥å†…å®¹ç›¸å¯¹å…ƒç´ çš„ä½ç½®ï¼Œä¸”å¿…é¡»æ˜¯ä¸‹é¢çš„å­—ç¬¦ä¸²ä¹‹ä¸€ï¼š
  - `'beforebegin'`ï¼šå…ƒç´ è‡ªèº«çš„å‰é¢ã€‚
  - `'afterbegin'`ï¼šæ’å…¥å…ƒç´ å†…éƒ¨çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ä¹‹å‰ã€‚
  - `'beforeend'`ï¼šæ’å…¥å…ƒç´ å†…éƒ¨çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ä¹‹åã€‚
  - `'afterend'`ï¼šå…ƒç´ è‡ªèº«çš„åé¢ã€‚
- `text`ï¼šæ˜¯è¦è¢«è§£æä¸ºHTMLæˆ–XMLå…ƒç´ ï¼Œå¹¶æ’å…¥åˆ°DOMæ ‘ä¸­çš„ `DOMString`ã€‚

**æ¡ˆä¾‹**ï¼š

è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ç”¨æ³•ï¼Œä¾‹å¦‚ğŸŒ°ç°åœ¨æœ‰ä¸€ä¸ª`HTML`çš„ç»“æ„ä¸ºï¼š

```html
<div id="one">æˆ‘æ˜¯one</div>
```

`JavaScript`ä»£ç ä¸­åŠ ä¸Šè¿™æ®µè¯ï¼š

```javascript
const one = document.getElementById('one');
one.insertAdjacentHTML('afterend', '<div id="two">æˆ‘æ˜¯two</div>');
```

ç°åœ¨æœ€ç»ˆçš„æ¸²æŸ“ç»“æœå°±å˜æˆäº†è¿™æ ·ï¼š

```html
<div id="one">æˆ‘æ˜¯one</div><div id="two">æˆ‘æ˜¯two</div>
```

**å·¥ä½œä¸Šçš„ç”¨æ³•**ï¼š

åœ¨é¡¹ç›®ä¸­ï¼Œä¸»è¦å¯ä»¥åº”ç”¨äºè¿™æ ·çš„åœºæ™¯ï¼šä¸€ä¸ªç©ºçš„å®¹å™¨(ä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ª`div`)ï¼Œå¼€å§‹éœ€è¦ä¸€ä¸ª`loading`çš„æ•ˆæœï¼Œåœ¨æ•°æ®åŠ è½½å®Œæ¯•ä¹‹åï¼Œéœ€è¦æŠŠ`loading`å–æ‰ä¸”æ¸…ç©ºå®¹å™¨å†…çš„å…ƒç´ å¹¶ä»¥å…¶å®ƒæ–¹å¼é‡æ–°æ¸²æŸ“å‡ºå®¹å™¨çš„å†…å®¹ã€‚

è¿™é‡Œå‘†å‘†å°±ä»¥å®šæ—¶å™¨æ¥æ¨¡æ‹Ÿä¸€ä¸‹æ•°æ®åŠ è½½çš„è¿‡ç¨‹ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š

```html
<body>
	<div id="container"></div>
</body>
<script>
	const container = document.getElementById('container');
  const loading = '<div id="loading">loading</div>'; // loadingå¯èƒ½æ˜¯ä¸€ä¸ªç»„ä»¶
  container.insertAdjacentHTML('beforeend', loading);
  setTimeout(() => {
    container.innerHTML = ''
  }, 2000)
</script>
```

(å½“ç„¶ï¼Œæˆ‘ä»¬ä¸è¦ä¸ºäº†åˆ»æ„ç”¨è€Œå»ç”¨ï¼Œé€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„)

**å®‰å…¨é—®é¢˜**ï¼š

- ä½¿ç”¨ `insertAdjacentHTML` æ’å…¥ç”¨æˆ·è¾“å…¥çš„HTMLå†…å®¹çš„æ—¶å€™ï¼Œéœ€è¦è½¬ä¹‰ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚

  ä¾‹å¦‚ï¼š

  ```javascript
  const one = document.getElementById('one');
  // ç”±äº encodeURI('<div id="two">æˆ‘æ˜¯two</div>')ä¼šè¢«è½¬è¯‘ä¸ºï¼š
  // %3Cdiv%20id=%22two%22%3E%E6%88%91%E6%98%AFtwo%3C/div%3E
  // å› æ­¤æœ€ç»ˆä¼šè¢«å½“æˆ "%3Cdiv%20id=%22two%22%3E%E6%88%91%E6%98%AFtwo%3C/div%3E"å­—ç¬¦ä¸²æ¸²æŸ“
  one.insertAdjacentHTML('afterend', encodeURI('<div id="two">æˆ‘æ˜¯two</div>'));
  ```

- å¦‚æœåªæ˜¯ä¸ºäº†æ’å…¥æ–‡æœ¬å†…å®¹ï¼ˆè€Œä¸æ˜¯HTMLèŠ‚ç‚¹ï¼‰ï¼Œä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå»ºè®®ä½¿ç”¨[`node.textContent`](https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent) æˆ–è€… [`node.insertAdjacentText()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/insertAdjacentText)ã€‚å› ä¸ºè¿™æ ·ä¸éœ€è¦ç»è¿‡HTMLè§£é‡Šå™¨çš„è½¬æ¢ï¼Œæ€§èƒ½ä¼šå¥½ä¸€ç‚¹ã€‚(è¿™é‡Œæ˜¯å¼•ç”¨çš„[MDN-insertAdjacentHTML](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/insertAdjacentHTML)ä¸Šçš„å†…å®¹)

[https://github.com/LinDaiDai/niubility-coding-js/issues/33](https://github.com/LinDaiDai/niubility-coding-js/issues/33)



### äº”ã€`insertAdjacentHTML`å’Œ`insertAdjacentElement`çš„åŒºåˆ«

ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ä¸åŒï¼Œ å‰è€…æ¥æ”¶çš„æ˜¯`æ˜¯è¦è¢«è§£æä¸ºHTMLæˆ–XMLå…ƒç´ çš„å­—ç¬¦ä¸²`ï¼Œè€Œåè€…æ¥æ”¶çš„æ˜¯ä¸€ä¸ª`element`å…ƒç´ ã€‚

```javascript
const one = document.getElementById('one');
one.insertAdjacentHTML('afterend', '<div id="two">æˆ‘æ˜¯two</div>');

const one = document.getElementById('one');
const two = document.createElement('div')
two.innerHTML = 'æˆ‘æ˜¯two';
one.insertAdjacentElement('afterend', two);
```

[https://github.com/LinDaiDai/niubility-coding-js/issues/34](https://github.com/LinDaiDai/niubility-coding-js/issues/34)





### å…­ã€å®ç°ä¹å®«æ ¼å¸ƒå±€

å®ç°æ•ˆæœå¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2020/6/24/172e3902d22427a3?w=162&h=160&f=png&s=7460)

å…ˆæ¥çœ‹ä¸€ä¸‹`HTML`æ–¹é¢çš„ä»£ç ï¼š

```html
<div id="container">
    <div class="item item-1">1</div>
    <div class="item item-2">2</div>
    <div class="item item-3">3</div>
    <div class="item item-4">4</div>
    <div class="item item-5">5</div>
    <div class="item item-6">6</div>
    <div class="item item-7">7</div>
    <div class="item item-8">8</div>
    <div class="item item-9">9</div>
</div>
```

è¿˜æœ‰ä¸€äº›`item`ä¸Šçš„åŸºç¡€`css`ä»£ç ï¼š

```css
#container {
    /* cssä»£ç  */
}

.item {
    font-size: 2em;
    text-align: center;
    border: 1px solid #e5e4e9;
}

.item-1 {
    background-color: #ef342a;
}

.item-2 {
    background-color: #f68f26;
}

.item-3 {
    background-color: #4ba946;
}

.item-4 {
    background-color: #0376c2;
}

.item-5 {
    background-color: #c077af;
}

.item-6 {
    background-color: #f8d29d;
}

.item-7 {
    background-color: #b5a87f;
}

.item-8 {
    background-color: #d0e4a9;
}

.item-9 {
    background-color: #4dc7ec;
}
```

**æ–¹æ¡ˆä¸€**ï¼š

ç¬¬ä¸€ç§æ–¹æ¡ˆå¯ä»¥ä½¿ç”¨æµ®åŠ¨+ç™¾åˆ†æ¯”ï¼š

```css
#container {
    width: 150px;
    height: 150px;
}
.item {
    float: left;
    width: 33.33%;
    height: 33.33%;
    box-sizing: border-box;
    font-size: 2em;
    text-align: center;
    border: 1px solid #e5e4e9;
}
```

**æ–¹æ¡ˆäºŒ**ï¼š

è¿˜å¯ä»¥ä½¿ç”¨`flex`å¸ƒå±€çš„æ–¹å¼ï¼š

```css
#container {
    width: 150px;
    height: 150px;
    display: flex;
    flex-wrap: wrap;
}
.item {
    width: 33.33%;
    height: 33.33%;
    box-sizing: border-box;
    font-size: 2em;
    text-align: center;
    border: 1px solid #e5e4e9;
}
```

**æ–¹æ¡ˆä¸‰**ï¼š

å¦å¤–çš„è¯ï¼Œä¹Ÿè®¸è¿˜å¯ä»¥è¯•è¯•`grid`ï¼Ÿ

```css
#container {
    display: grid;
    grid-template-columns: 50px 50px 50px;
    grid-template-rows: 50px 50px 50px;
}
.item {
    font-size: 2em;
    text-align: center;
    border: 1px solid #e5e4e9;
}
```

ç­”æ¡ˆå‚è€ƒï¼š[https://github.com/haizlin/fe-interview/issues/2270](https://github.com/haizlin/fe-interview/issues/2270)

[https://github.com/LinDaiDai/niubility-coding-js/issues/35](https://github.com/LinDaiDai/niubility-coding-js/issues/35)



### ä¸ƒã€è¯´è¯´will-change

`will-change`æ˜¯`CSS3`æ–°å¢çš„æ ‡å‡†å±æ€§ï¼Œå®ƒçš„ä½œç”¨å¾ˆå•çº¯ï¼Œå°±æ˜¯`"å¢å¼ºé¡µé¢æ¸²æŸ“æ€§èƒ½"`ï¼Œå½“æˆ‘ä»¬åœ¨é€šè¿‡æŸäº›è¡Œä¸ºè§¦å‘é¡µé¢è¿›è¡Œå¤§é¢ç§¯ç»˜åˆ¶çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¾€å¾€æ˜¯æ²¡æœ‰å‡†å¤‡ï¼Œåªèƒ½è¢«åŠ¨çš„ä½¿ç”¨CPUå»è®¡ç®—å’Œé‡ç»˜ï¼Œç”±äºäº‹å…ˆæ²¡æœ‰å‡†å¤‡ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„æ¸²æŸ“å¯èƒ½ä¼šå‡ºç°æ‰å¸§ã€å¡é¡¿ç­‰æƒ…å†µã€‚

è€Œ`will-change`åˆ™æ˜¯åœ¨çœŸæ­£çš„è¡Œä¸ºè§¦å‘ä¹‹å‰å‘Šè¯‰æµè§ˆå™¨å¯èƒ½è¦è¿›è¡Œé‡ç»˜äº†ï¼Œç›¸å½“äºæµè§ˆå™¨æŠŠCPUæ‹‰ä¸Šäº†ï¼Œèƒ½ä»å®¹çš„é¢å¯¹æ¥ä¸‹æ¥çš„å˜å½¢ã€‚

å¸¸ç”¨çš„è¯­æ³•ä¸»è¦æœ‰ï¼š

- `whil-change: scroll-position;` å³å°†å¼€å§‹æ»šåŠ¨
- `will-change: contents;` å†…å®¹è¦åŠ¨ç”»æˆ–è€…å˜åŒ–äº†
- `will-transform;` transformç›¸å…³çš„å±æ€§è¦å˜åŒ–äº†(å¸¸ç”¨)

æ³¨æ„ï¼š

- `will-change`è™½ç„¶å¯ä»¥å¼€å¯åŠ é€Ÿï¼Œä½†æ˜¯ä¸€å®šè¦é€‚åº¦ä½¿ç”¨
- å¼€å¯åŠ é€Ÿçš„ä»£ä»·ä¸ºæ‰‹æœºçš„è€—ç”µé‡ä¼šå¢åŠ 
- ä½¿ç”¨æ—¶éµå¾ªæœ€å°åŒ–å½±å“åŸåˆ™ï¼Œå¯ä»¥å¯¹ä¼ªå…ƒç´ å¼€å¯åŠ é€Ÿï¼Œç‹¬ç«‹æ¸²æŸ“
- å¯ä»¥å†™åœ¨ä¼ªç±»ä¸­ï¼Œä¾‹å¦‚`hover`ä¸­ï¼Œè¿™æ ·ç§»å‡ºå…ƒç´ çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨`remove`æ‰`will-change`äº†
- å¦‚æœä½¿ç”¨`JS`æ·»åŠ äº†`will-change`ï¼Œæ³¨æ„è¦åŠæ—¶`remove`æ‰ï¼Œæ–¹å¼å°±æ˜¯`style.willChange = 'auto'`

[https://github.com/LinDaiDai/niubility-coding-js/issues/36](https://github.com/LinDaiDai/niubility-coding-js/issues/36)



## å‚è€ƒæ–‡ç« 

çŸ¥è¯†æ— ä»·ï¼Œæ”¯æŒåŸåˆ›ã€‚

å‚è€ƒæ–‡ç« ï¼š

- [ã€Šæµªé‡Œè¡ŒèˆŸ-ç›˜ç‚¹ES7ã€ES8ã€ES9ã€ES10æ–°ç‰¹æ€§ã€‹](https://juejin.im/post/5dda2b5e6fb9a07a83691766#heading-7)
- [ã€ŠMDN-isNaNã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/isNaN)
- [ã€Šä½¿ç”¨CSS3 will-changeæé«˜é¡µé¢æ»šåŠ¨ã€åŠ¨ç”»ç­‰æ¸²æŸ“æ€§èƒ½ã€‹](https://www.zhangxinxu.com/wordpress/2015/11/css3-will-change-improve-paint/)



## åè¯­

ä½ ç›¼ä¸–ç•Œï¼Œæˆ‘ç›¼æœ›ä½ æ— `bug`ã€‚è¿™ç¯‡æ–‡ç« å°±ä»‹ç»åˆ°è¿™é‡Œã€‚

æ‚¨æ¯å‘¨ä¹Ÿè®¸ä¼šèŠ±`48`å°æ—¶çš„æ—¶é—´åœ¨å·¥ä½œğŸ’»ä¸Šï¼Œä¼šèŠ±`49`å°æ—¶çš„æ—¶é—´åœ¨ç¡è§‰ğŸ˜´ä¸Šï¼Œä¹Ÿè®¸è¿˜å¯ä»¥å†èŠ±`20`åˆ†é’Ÿçš„æ—¶é—´åœ¨å‘†å‘†çš„7é“é¢˜ä¸Šï¼Œæ—¥ç§¯æœˆç´¯ï¼Œæˆ‘ç›¸ä¿¡æˆ‘ä»¬éƒ½èƒ½è§è¯å½¼æ­¤çš„æˆé•¿ğŸ˜Šã€‚

ä»€ä¹ˆï¼Ÿä½ é—®æˆ‘ä¸ºä»€ä¹ˆç³»åˆ—çš„åå­—å«`DD`ï¼Ÿå› ä¸º`å‘†å‘†`å‘€ï¼Œå“ˆå“ˆğŸ˜„ã€‚

å–œæ¬¢**éœ–å‘†å‘†**çš„å°ä¼™è¿˜å¸Œæœ›å¯ä»¥å…³æ³¨éœ–å‘†å‘†çš„å…¬ä¼—å· `LinDaiDai` æˆ–è€…æ‰«ä¸€æ‰«ä¸‹é¢çš„äºŒç»´ç ğŸ‘‡ğŸ‘‡ğŸ‘‡ã€‚

[![img](https://user-gold-cdn.xitu.io/2020/6/24/172e396f92646b65?w=900&h=500&f=gif&s=411532)

æˆ‘ä¼šä¸å®šæ—¶çš„æ›´æ–°ä¸€äº›å‰ç«¯æ–¹é¢çš„çŸ¥è¯†å†…å®¹ä»¥åŠè‡ªå·±çš„åŸåˆ›æ–‡ç« ğŸ‰

ä½ çš„é¼“åŠ±å°±æ˜¯æˆ‘æŒç»­åˆ›ä½œçš„ä¸»è¦åŠ¨åŠ› ğŸ˜Šã€‚